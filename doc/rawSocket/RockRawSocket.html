<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_40-internal) on Thu Apr 09 14:30:54 EDT 2015 -->
<title>RockRawSocket</title>
<meta name="date" content="2015-04-09">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RockRawSocket";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":9,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../rawSocket/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RockRawSocket.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../rawSocket/RawHttpGet.html" title="class in rawSocket"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../rawSocket/TCPHeader.html" title="class in rawSocket"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?rawSocket/RockRawSocket.html" target="_top">Frames</a></li>
<li><a href="RockRawSocket.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">rawSocket</div>
<h2 title="Class RockRawSocket" class="title">Class RockRawSocket</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.savarese.rocksaw.net.RawSocket</li>
<li>
<ul class="inheritance">
<li>rawSocket.RockRawSocket</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">RockRawSocket</span>
extends com.savarese.rocksaw.net.RawSocket</pre>
<div class="block">The Class RockRawSocket.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#accumulateACK">accumulateACK</a></span></code>
<div class="block">Sequence of the highest received in order packet, whenever receive a new in order packet, update accumulateACK according to the         packet's sequence and tcp segment length.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#ACK">ACK</a></span></code>
<div class="block">The signal ACK packet.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.net.InetAddress</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#clientAddress">clientAddress</a></span></code>
<div class="block">The client address.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#cwnd">cwnd</a></span></code>
<div class="block">The congestion window size, initial value is 1.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#FIN">FIN</a></span></code>
<div class="block">The signal FIN packet.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.io.ByteArrayInputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#inputStream">inputStream</a></span></code>
<div class="block">The input stream, used by application to read data received.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#ipHeaderRecv">ipHeaderRecv</a></span></code>
<div class="block">The IP header received packet.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#MSS">MSS</a></span></code>
<div class="block">The maximum segment size: 1460 byte.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#nextSentACK">nextSentACK</a></span></code>
<div class="block">ACK of the next sent packet, normally this is always accumulateACK + 1.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#nextSentSeq">nextSentSeq</a></span></code>
<div class="block">Sequence number of the next sent packet, update according to the ACK of received packet.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.io.ByteArrayOutputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#outputStream">outputStream</a></span></code>
<div class="block">The output stream, received data (including HTTP response header) were stored in this stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.util.Queue&lt;<a href="../rawSocket/Packet.html" title="class in rawSocket">Packet</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#receiverBuffer">receiverBuffer</a></span></code>
<div class="block">The receiver packet buffer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.Queue&lt;<a href="../rawSocket/Packet.html" title="class in rawSocket">Packet</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#senderBuffer">senderBuffer</a></span></code>
<div class="block">The sender buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.net.InetAddress</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#serverAddress">serverAddress</a></span></code>
<div class="block">The server address.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private com.savarese.rocksaw.net.RawSocket</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#sock_receive">sock_receive</a></span></code>
<div class="block">The raw socket used to receive data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#srcPort">srcPort</a></span></code>
<div class="block">The source port.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#SYN">SYN</a></span></code>
<div class="block">The signal of SYN packet.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../rawSocket/TCPHeader.html" title="class in rawSocket">TCPHeader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#tcpHeaderRecv">tcpHeaderRecv</a></span></code>
<div class="block">The TCP header of received packet.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.Queue&lt;<a href="../rawSocket/Packet.html" title="class in rawSocket">Packet</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#unackedBuffer">unackedBuffer</a></span></code>
<div class="block">The unacked buffer, all sent (unacked) packets are placed in this buffer.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.com.savarese.rocksaw.net.RawSocket">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.savarese.rocksaw.net.RawSocket</h3>
<code>PF_INET, PF_INET6</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#RockRawSocket--">RockRawSocket</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#CheckTimeOut--">CheckTimeOut</a></span>()</code>
<div class="block">Check time out.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#connect-java.net.InetAddress-int-">connect</a></span>(java.net.InetAddress&nbsp;address,
       int&nbsp;timeout)</code>
<div class="block">Connect, handle all the three way handshake of a TCP connection.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#getData-byte:A-rawSocket.IPHeader-rawSocket.TCPHeader-">getData</a></span>(byte[]&nbsp;buffer,
       <a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a>&nbsp;ipHeader,
       <a href="../rawSocket/TCPHeader.html" title="class in rawSocket">TCPHeader</a>&nbsp;tcpHeader)</code>
<div class="block">Gets the data from received data in buffer.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.io.InputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#getInputStream--">getInputStream</a></span>()</code>
<div class="block">Gets the input stream.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private <a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#getIpHeader-byte:A-">getIpHeader</a></span>(byte[]&nbsp;buffer)</code>
<div class="block">Gets the ip header.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private static java.net.InetAddress</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#getLocalEth0Address--">getLocalEth0Address</a></span>()</code>
<div class="block">Gets the local eth0 address.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private <a href="../rawSocket/TCPHeader.html" title="class in rawSocket">TCPHeader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#getTCPHeader-byte:A-rawSocket.IPHeader-">getTCPHeader</a></span>(byte[]&nbsp;buffer,
            <a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a>&nbsp;ipHeaderRecv)</code>
<div class="block">Gets the TCP header.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#getTcpSegmentLength-rawSocket.IPHeader-rawSocket.TCPHeader-">getTcpSegmentLength</a></span>(<a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a>&nbsp;ipHeader,
                   <a href="../rawSocket/TCPHeader.html" title="class in rawSocket">TCPHeader</a>&nbsp;tcpHeader)</code>
<div class="block">Gets the tcp segment length.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#HandleACK-long-">HandleACK</a></span>(long&nbsp;receivedACK)</code>
<div class="block">HandleACK, Ideally, whenever sender send a packet with payload, this packet was kept
 in unACKed buffer, and was removed when got ACK.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#HighestUnAckedPacketLength--">HighestUnAckedPacketLength</a></span>()</code>
<div class="block">HighestUnAckedPacketLength, Get TCP segment length of first unacked packet.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#HighestUnAckedPacketSeq--">HighestUnAckedPacketSeq</a></span>()</code>
<div class="block">Packets must be acked in order.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#HighestUnSentPacketSeq--">HighestUnSentPacketSeq</a></span>()</code>
<div class="block">Packets must also be sent in order.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#isInOrder-long-">isInOrder</a></span>(long&nbsp;receivedSeq)</code>
<div class="block">isInOrder, Checks if the received sequence number in order.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#parsePacket-byte:A-">parsePacket</a></span>(byte[]&nbsp;buffer)</code>
<div class="block">Parses the packet.Identify if the packet is the packet we are interested.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#randomNumber-int-int-">randomNumber</a></span>(int&nbsp;min,
            int&nbsp;max)</code>
<div class="block">randomNumber, Random number.Generate random number between [min, max]</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#receiverPacket-rawSocket.IPHeader-rawSocket.TCPHeader-byte:A-">receiverPacket</a></span>(<a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a>&nbsp;ipHeaderRecv,
              <a href="../rawSocket/TCPHeader.html" title="class in rawSocket">TCPHeader</a>&nbsp;tcpHeaderRecv,
              byte[]&nbsp;payload)</code>
<div class="block">receiverPacket, When receive packet, we do following process:
 
 (1) Check checksum, packet with wrong checksum will be discarded immediately
 (2) Handle the ACK of received packet, decide 
     2.1 Is it a new ACK?
     2.2 Is it a duplicate ACK?
     2.3 Is it a ACK that outdate?
 (3) Handle the Seq of received packet, decide 
           3.1 Is it a out of order packet?
           3.2 Is it a in order packet?
 (4) Decide the ACK number and sequence number of next sent packet, put the new packet in send buffer</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#Send-java.lang.String-">Send</a></span>(java.lang.String&nbsp;content)</code>
<div class="block">THis function used to send data and also store the received data (response)
 in receive buffer.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#sendPacket-int-byte:A-">sendPacket</a></span>(int&nbsp;type,
          byte[]&nbsp;data)</code>
<div class="block">sendPacket, Send a packet.Notice here we do not actually send packet, we just put it into send packet buffer
 The real sending work is handled by sendPendingPackets()</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../rawSocket/RockRawSocket.html#sendPendingPackets--">sendPendingPackets</a></span>()</code>
<div class="block">Send pending packets.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.savarese.rocksaw.net.RawSocket">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.savarese.rocksaw.net.RawSocket</h3>
<code>bind, bindDevice, close, getIPHeaderInclude, getProtocolByName, getReceiveBufferSize, getReceiveTimeout, getSendBufferSize, getSendTimeout, getSourceAddressForDestination, getUseSelectTimeout, isOpen, open, read, read, read, read, setIPHeaderInclude, setReceiveBufferSize, setReceiveTimeout, setSendBufferSize, setSendTimeout, setUseSelectTimeout, write, write</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="serverAddress">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serverAddress</h4>
<pre>private&nbsp;java.net.InetAddress serverAddress</pre>
<div class="block">The server address.</div>
</li>
</ul>
<a name="clientAddress">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clientAddress</h4>
<pre>private&nbsp;java.net.InetAddress clientAddress</pre>
<div class="block">The client address.</div>
</li>
</ul>
<a name="srcPort">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>srcPort</h4>
<pre>private&nbsp;int srcPort</pre>
<div class="block">The source port.</div>
</li>
</ul>
<a name="sock_receive">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sock_receive</h4>
<pre>private&nbsp;com.savarese.rocksaw.net.RawSocket sock_receive</pre>
<div class="block">The raw socket used to receive data.</div>
</li>
</ul>
<a name="ipHeaderRecv">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ipHeaderRecv</h4>
<pre><a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a> ipHeaderRecv</pre>
<div class="block">The IP header received packet.</div>
</li>
</ul>
<a name="tcpHeaderRecv">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tcpHeaderRecv</h4>
<pre><a href="../rawSocket/TCPHeader.html" title="class in rawSocket">TCPHeader</a> tcpHeaderRecv</pre>
<div class="block">The TCP header of received packet.</div>
</li>
</ul>
<a name="cwnd">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cwnd</h4>
<pre>private&nbsp;int cwnd</pre>
<div class="block">The congestion window size, initial value is 1.</div>
</li>
</ul>
<a name="MSS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MSS</h4>
<pre>private&nbsp;int MSS</pre>
<div class="block">The maximum segment size: 1460 byte.</div>
</li>
</ul>
<a name="senderBuffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>senderBuffer</h4>
<pre>java.util.Queue&lt;<a href="../rawSocket/Packet.html" title="class in rawSocket">Packet</a>&gt; senderBuffer</pre>
<div class="block">The sender buffer.</div>
</li>
</ul>
<a name="unackedBuffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unackedBuffer</h4>
<pre>java.util.Queue&lt;<a href="../rawSocket/Packet.html" title="class in rawSocket">Packet</a>&gt; unackedBuffer</pre>
<div class="block">The unacked buffer, all sent (unacked) packets are placed in this buffer.</div>
</li>
</ul>
<a name="receiverBuffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiverBuffer</h4>
<pre>java.util.Queue&lt;<a href="../rawSocket/Packet.html" title="class in rawSocket">Packet</a>&gt; receiverBuffer</pre>
<div class="block">The receiver packet buffer.</div>
</li>
</ul>
<a name="outputStream">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outputStream</h4>
<pre>java.io.ByteArrayOutputStream outputStream</pre>
<div class="block">The output stream, received data (including HTTP response header) were stored in this stream.</div>
</li>
</ul>
<a name="inputStream">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputStream</h4>
<pre>java.io.ByteArrayInputStream inputStream</pre>
<div class="block">The input stream, used by application to read data received.</div>
</li>
</ul>
<a name="accumulateACK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accumulateACK</h4>
<pre>long accumulateACK</pre>
<div class="block">Sequence of the highest received in order packet, whenever receive a new in order packet, update accumulateACK according to the         packet's sequence and tcp segment length.</div>
</li>
</ul>
<a name="nextSentACK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextSentACK</h4>
<pre>long nextSentACK</pre>
<div class="block">ACK of the next sent packet, normally this is always accumulateACK + 1.</div>
</li>
</ul>
<a name="nextSentSeq">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextSentSeq</h4>
<pre>long nextSentSeq</pre>
<div class="block">Sequence number of the next sent packet, update according to the ACK of received packet.</div>
</li>
</ul>
<a name="SYN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SYN</h4>
<pre>private&nbsp;int SYN</pre>
<div class="block">The signal of SYN packet.</div>
</li>
</ul>
<a name="ACK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ACK</h4>
<pre>private&nbsp;int ACK</pre>
<div class="block">The signal ACK packet.</div>
</li>
</ul>
<a name="FIN">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FIN</h4>
<pre>private&nbsp;int FIN</pre>
<div class="block">The signal FIN packet.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RockRawSocket--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RockRawSocket</h4>
<pre>public&nbsp;RockRawSocket()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="connect-java.net.InetAddress-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connect</h4>
<pre>public&nbsp;boolean&nbsp;connect(java.net.InetAddress&nbsp;address,
                       int&nbsp;timeout)</pre>
<div class="block">Connect, handle all the three way handshake of a TCP connection.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>address</code> - the address that you want to connect</dd>
<dd><code>timeout</code> - the timeout</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true, if successful, otherwise false</dd>
</dl>
</li>
</ul>
<a name="receiverPacket-rawSocket.IPHeader-rawSocket.TCPHeader-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiverPacket</h4>
<pre>private&nbsp;void&nbsp;receiverPacket(<a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a>&nbsp;ipHeaderRecv,
                            <a href="../rawSocket/TCPHeader.html" title="class in rawSocket">TCPHeader</a>&nbsp;tcpHeaderRecv,
                            byte[]&nbsp;payload)</pre>
<div class="block">receiverPacket, When receive packet, we do following process:
 
 (1) Check checksum, packet with wrong checksum will be discarded immediately
 (2) Handle the ACK of received packet, decide 
     2.1 Is it a new ACK?
     2.2 Is it a duplicate ACK?
     2.3 Is it a ACK that outdate?
 (3) Handle the Seq of received packet, decide 
           3.1 Is it a out of order packet?
           3.2 Is it a in order packet?
 (4) Decide the ACK number and sequence number of next sent packet, put the new packet in send buffer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ipHeaderRecv</code> - the IP header of received packet</dd>
<dd><code>tcpHeaderRecv</code> - the TCP header received packet</dd>
<dd><code>payload</code> - the data of received packet</dd>
</dl>
</li>
</ul>
<a name="isInOrder-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInOrder</h4>
<pre>private&nbsp;boolean&nbsp;isInOrder(long&nbsp;receivedSeq)</pre>
<div class="block">isInOrder, Checks if the received sequence number in order.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>receivedSeq</code> - the sequence number of received packet</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true, if is in order</dd>
</dl>
</li>
</ul>
<a name="HandleACK-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HandleACK</h4>
<pre>private&nbsp;boolean&nbsp;HandleACK(long&nbsp;receivedACK)</pre>
<div class="block">HandleACK, Ideally, whenever sender send a packet with payload, this packet was kept
 in unACKed buffer, and was removed when got ACK. Then we reset the sequence number of next sent packet.
 But two situations must be taken care of: 
 (1) What if the packet has data, but it is lost, hence there will be no ACK for it 
 (2) What if several packets has data got lost, and after retransmit client send you a new ack that
           are larger than the head sequence seq
 So the process to reset sequence number is:
 (1) Decide the ideal ACK number, it should be the highest unacked packet's sequence number + highest unacked packet's TCP segment length
 (2) Compare the ACK number of received packet and ideal packet, if 
 (3) receivedACK == idealACK && tcpHeaderRecv.getSYN() != 1, perfect situation, we ack new packet. Increase cwnd and remove the packet from buffer, set 
     the sequence number to be ACK number of received packet
 (4) receivedACK == idealACK + 1 this would happen in FIN stage, we do not have to increase cwnd in this case
 (5) receivedACK > idealACK, this may means network just recover from a bursty loss. We moved all the acked packet out of unacked buffer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>receivedACK</code> - the ACK number of received packet</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true, if successful</dd>
</dl>
</li>
</ul>
<a name="HighestUnAckedPacketLength--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HighestUnAckedPacketLength</h4>
<pre>private&nbsp;int&nbsp;HighestUnAckedPacketLength()</pre>
<div class="block">HighestUnAckedPacketLength, Get TCP segment length of first unacked packet.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>TCP segment length of first unacked packe</dd>
</dl>
</li>
</ul>
<a name="randomNumber-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>randomNumber</h4>
<pre>private&nbsp;int&nbsp;randomNumber(int&nbsp;min,
                         int&nbsp;max)</pre>
<div class="block">randomNumber, Random number.Generate random number between [min, max]</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>min</code> - the min</dd>
<dd><code>max</code> - the max</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the random number generated</dd>
</dl>
</li>
</ul>
<a name="sendPacket-int-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendPacket</h4>
<pre>private&nbsp;void&nbsp;sendPacket(int&nbsp;type,
                        byte[]&nbsp;data)</pre>
<div class="block">sendPacket, Send a packet.Notice here we do not actually send packet, we just put it into send packet buffer
 The real sending work is handled by sendPendingPackets()</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>type</code> - the type of sent packet, SYN, FIN, or ACK</dd>
<dd><code>data</code> - the payload of sent packet</dd>
</dl>
</li>
</ul>
<a name="sendPendingPackets--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendPendingPackets</h4>
<pre>private&nbsp;void&nbsp;sendPendingPackets()</pre>
<div class="block">Send pending packets. Here is where we try to send as much as the packet under the limitation of cwnd</div>
</li>
</ul>
<a name="HighestUnAckedPacketSeq--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HighestUnAckedPacketSeq</h4>
<pre>private&nbsp;long&nbsp;HighestUnAckedPacketSeq()</pre>
<div class="block">Packets must be acked in order. All unackedd packets will be stored in the buffer.
 This function will check which is the oldest un acked packet</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the sequence number of highest unacked packet</dd>
</dl>
</li>
</ul>
<a name="HighestUnSentPacketSeq--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HighestUnSentPacketSeq</h4>
<pre>private&nbsp;long&nbsp;HighestUnSentPacketSeq()</pre>
<div class="block">Packets must also be sent in order. All unsent packets will be stored in unsent packet buffer
 first. So this function check which is the next to be sent packet</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the sequence number of next to be sent packet.</dd>
</dl>
</li>
</ul>
<a name="getLocalEth0Address--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalEth0Address</h4>
<pre>private static&nbsp;java.net.InetAddress&nbsp;getLocalEth0Address()</pre>
<div class="block">Gets the local eth0 address.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the local eth0 address</dd>
</dl>
</li>
</ul>
<a name="parsePacket-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parsePacket</h4>
<pre>private&nbsp;boolean&nbsp;parsePacket(byte[]&nbsp;buffer)</pre>
<div class="block">Parses the packet.Identify if the packet is the packet we are interested.
 The process is: 
 (1) Check if it is a IP packet,if is, check source address
 (2) If it is packet come from target server, get TCP header
 (3) Check destination port, to see if it is the flow we want</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>buffer</code> - the buffer</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true, if successful</dd>
</dl>
</li>
</ul>
<a name="getTCPHeader-byte:A-rawSocket.IPHeader-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTCPHeader</h4>
<pre>private&nbsp;<a href="../rawSocket/TCPHeader.html" title="class in rawSocket">TCPHeader</a>&nbsp;getTCPHeader(byte[]&nbsp;buffer,
                               <a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a>&nbsp;ipHeaderRecv)</pre>
<div class="block">Gets the TCP header.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>buffer</code> - the buffer</dd>
<dd><code>ipHeaderRecv</code> - the ip header recv</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the TCP header</dd>
</dl>
</li>
</ul>
<a name="getIpHeader-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIpHeader</h4>
<pre>private&nbsp;<a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a>&nbsp;getIpHeader(byte[]&nbsp;buffer)</pre>
<div class="block">Gets the ip header.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>buffer</code> - the buffer that stores data</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the IP header of received packet</dd>
</dl>
</li>
</ul>
<a name="Send-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Send</h4>
<pre>public&nbsp;boolean&nbsp;Send(java.lang.String&nbsp;content)</pre>
<div class="block">THis function used to send data and also store the received data (response)
 in receive buffer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>content</code> - the content</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true, if successful</dd>
</dl>
</li>
</ul>
<a name="CheckTimeOut--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CheckTimeOut</h4>
<pre>private&nbsp;void&nbsp;CheckTimeOut()</pre>
<div class="block">Check time out.</div>
</li>
</ul>
<a name="getData-byte:A-rawSocket.IPHeader-rawSocket.TCPHeader-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getData</h4>
<pre>private&nbsp;byte[]&nbsp;getData(byte[]&nbsp;buffer,
                       <a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a>&nbsp;ipHeader,
                       <a href="../rawSocket/TCPHeader.html" title="class in rawSocket">TCPHeader</a>&nbsp;tcpHeader)</pre>
<div class="block">Gets the data from received data in buffer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>buffer</code> - the buffer which stores the packet</dd>
<dd><code>ipHeader</code> - the IP header of received packet</dd>
<dd><code>tcpHeader</code> - the TCP header of received packet</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the payload of received packet</dd>
</dl>
</li>
</ul>
<a name="getTcpSegmentLength-rawSocket.IPHeader-rawSocket.TCPHeader-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTcpSegmentLength</h4>
<pre>private&nbsp;int&nbsp;getTcpSegmentLength(<a href="../rawSocket/IPHeader.html" title="class in rawSocket">IPHeader</a>&nbsp;ipHeader,
                                <a href="../rawSocket/TCPHeader.html" title="class in rawSocket">TCPHeader</a>&nbsp;tcpHeader)</pre>
<div class="block">Gets the tcp segment length.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ipHeader</code> - the IP header of received packet</dd>
<dd><code>tcpHeader</code> - the TCP header of received packet</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the tcp segment length of received packet</dd>
</dl>
</li>
</ul>
<a name="getInputStream--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getInputStream</h4>
<pre>public&nbsp;java.io.InputStream&nbsp;getInputStream()</pre>
<div class="block">Gets the input stream.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the input stream</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../rawSocket/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RockRawSocket.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../rawSocket/RawHttpGet.html" title="class in rawSocket"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../rawSocket/TCPHeader.html" title="class in rawSocket"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?rawSocket/RockRawSocket.html" target="_top">Frames</a></li>
<li><a href="RockRawSocket.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
